<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Texturing (Uso de texturas a traves de Shaders) # Como hemos aprendido en el transcurso de este capitulo, sabemos que p5 para renderizar en general hace uso de un shader general, tambien hemos visto que es posible tener un acercamiento hacia la texturizacion de objetos haciendo uso de shaders programados manualmente, en esta seccion mostraremos nuestro acercamiento inicial hacia el texturado con shaders entiendo el espacio de textura que esta dado por el espacio UV, que lo entendemos como un espacio normalizado donde las coordenadas \(0 \leq X \leq 1\) y \(0 \leq Y \leq 1\) Sketch de UV Texturing # uv."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Texturing (Uso de texturas a traves de Shaders) # Como hemos aprendido en el transcurso de este capitulo, sabemos que p5 para renderizar en general hace uso de un shader general, tambien hemos visto que es posible tener un acercamiento hacia la texturizacion de objetos haciendo uso de shaders programados manualmente, en esta seccion mostraremos nuestro acercamiento inicial hacia el texturado con shaders entiendo el espacio de textura que esta dado por el espacio UV, que lo entendemos como un espacio normalizado donde las coordenadas \(0 \leq X \leq 1\) y \(0 \leq Y \leq 1\) Sketch de UV Texturing # uv."><meta property="og:type" content="article"><meta property="og:url" content="https://jussilvaca.github.io/docs/talleres/shadersExercises/texturing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-11-29T06:41:06-05:00"><title>Texturing | Talleres Compuvisual</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.8e4524bfd3f4a117bd7825b821c16bbe47d6131cde89eaf45425be38ee5c3a61.js integrity="sha256-jkUkv9P0oRe9eCW4IcFrvkfWExzeier0VCW+OO5cOmE=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Talleres Compuvisual</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Talleres</span><ul><li><a href=/docs/talleres/ilusiones/>Ilusiones</a></li><li><a href=/docs/talleres/portal/>Portal</a></li><li><input type=checkbox id=section-20254d110ff8452ca0de0eeedce0e13b class=toggle checked>
<label for=section-20254d110ff8452ca0de0eeedce0e13b class="flex justify-between"><a href=/docs/talleres/shadersExercises/>Shaders Exercises</a></label><ul><li><a href=/docs/talleres/shadersExercises/blendModes/>Blend Modes</a></li><li><a href=/docs/talleres/shadersExercises/nonEuclidean/>Non Euclidean</a></li><li><a href=/docs/talleres/shadersExercises/spatialCoherence/>Spatial Coherence</a></li><li><a href=/docs/talleres/shadersExercises/texturing/ class=active>Texturing</a></li></ul></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Texturing</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#texturing-uso-de-texturas-a-traves-de-shaders>Texturing (Uso de texturas a traves de Shaders)</a></li><li><a href=#sketch-de-uv-texturing>Sketch de UV Texturing</a></li><li><a href=#sketch-de-uv-texturing-coordenadas-inversas>Sketch de UV Texturing (Coordenadas Inversas)</a></li><li><a href=#sketch-de-uv-texturing-agregando-color-azul>Sketch de UV Texturing (Agregando Color Azul)</a></li><li><a href=#sketch-de-uv-screen>Sketch de UV Screen</a></li><li><a href=#sketch-de-luma-y-aritmetic-mean>Sketch de Luma y Aritmetic Mean</a></li><li><a href=#sketch-de-hsv>Sketch de HSV</a></li></ul></li></ul></nav></aside></header><article class=markdown><h2 id=texturing-uso-de-texturas-a-traves-de-shaders>Texturing (Uso de texturas a traves de Shaders)
<a class=anchor href=#texturing-uso-de-texturas-a-traves-de-shaders>#</a></h2><p>Como hemos aprendido en el transcurso de este capitulo, sabemos que p5 para renderizar en general hace uso de un shader general, tambien hemos visto que es posible tener un acercamiento hacia la texturizacion de objetos haciendo uso de shaders programados manualmente, en esta seccion mostraremos nuestro acercamiento inicial hacia el texturado con shaders entiendo el espacio de textura que esta dado por el espacio UV, que lo entendemos como un espacio normalizado donde las coordenadas
<link rel=stylesheet href=/katex/katex.min.css><script defer src=/katex/katex.min.js></script>
<script defer src=/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>
\(0 \leq X \leq 1\)</span>
y <span>\(0 \leq Y \leq 1\)</span></p><h2 id=sketch-de-uv-texturing>Sketch de UV Texturing
<a class=anchor href=#sketch-de-uv-texturing>#</a></h2><p><details><summary>uv.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>uvShader</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Define geometry directly in clip space (i.e., matrices: Tree.NONE).
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// Interpolate only texture coordinates (i.e., varyings: Tree.texcoords2).
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// see: https://github.com/VisualComputing/p5.treegl#handling
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>uvShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/sketches/shaders/uv.frag&#39;</span>,
</span></span><span style=display:flex><span>                        { <span style=color:#a6e22e>matrices</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>NONE</span>, <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// shaders require WEBGL mode to work
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>300</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>  <span style=color:#75715e>// see: https://p5js.org/reference/#/p5/shader
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>uvShader</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// https://p5js.org/reference/#/p5/textureMode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// best and simplest is to just always used NORMAL
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>  clip-space quad shape, i.e., both x and y vertex coordinates ∈ [-1..1]
</span></span></span><span style=display:flex><span><span style=color:#75715e>  since textureMode is NORMAL, texture coordinates ∈ [-1..1]
</span></span></span><span style=display:flex><span><span style=color:#75715e>  see: https://p5js.org/reference/#/p5/beginShape
</span></span></span><span style=display:flex><span><span style=color:#75715e>       https://p5js.org/reference/#/p5/vertex
</span></span></span><span style=display:flex><span><span style=color:#75715e>        y                  v
</span></span></span><span style=display:flex><span><span style=color:#75715e>        |                  |
</span></span></span><span style=display:flex><span><span style=color:#75715e>  (-1,1)|     (1,1)        (0,1)     (1,1)
</span></span></span><span style=display:flex><span><span style=color:#75715e>  *_____|_____*            *__________*   
</span></span></span><span style=display:flex><span><span style=color:#75715e>  |     |     |            |          |        
</span></span></span><span style=display:flex><span><span style=color:#75715e>  |_____|_____|__x         | texture  |        
</span></span></span><span style=display:flex><span><span style=color:#75715e>  |     |     |            |  space   |
</span></span></span><span style=display:flex><span><span style=color:#75715e>  *_____|_____*            *__________*___ u
</span></span></span><span style=display:flex><span><span style=color:#75715e>  (-1,-1)    (1,-1)       (0,0)    (1,0) 
</span></span></span><span style=display:flex><span><span style=color:#75715e>  */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>beginShape</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vertex</span>( <span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vertex</span>( <span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,  <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>endShape</span>();
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ✨ it&#39;s worth noting (not mentioned in the p5 api docs though)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// that quad (https://p5js.org/reference/#/p5/quad) also adds the
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// texture coords to each of its vertices. Hence:
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// quad(-1, -1, 1, -1, 1, 1, -1, 1);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// produce the same results as the above beginShape / endShape
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div></div></details><details><summary>uv.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GLSL data-lang=GLSL><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the texture coordinates varying was defined in </span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the vertex shader by treegl readShader()</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// open your console and &amp; see!</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// glsl swizzling is both handy and elegant</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// see: https://www.khronos.org/opengl/wiki/Data_Type_(GLSL)#Swizzling</span>
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(texcoords2.xy, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details></p><iframe id=uv style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/sketches/uv.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=sketch-de-uv-texturing-coordenadas-inversas>Sketch de UV Texturing (Coordenadas Inversas)
<a class=anchor href=#sketch-de-uv-texturing-coordenadas-inversas>#</a></h2><details><summary>uv.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GLSL data-lang=GLSL><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the texture coordinates varying was defined in </span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the vertex shader by treegl readShader()</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// open your console and &amp; see!</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// glsl swizzling is both handy and elegant</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// see: https://www.khronos.org/opengl/wiki/Data_Type_(GLSL)#Swizzling</span>
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(texcoords2.x, <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> texcoords2.y, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><iframe id=uvInv style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/sketches/uvInv.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=sketch-de-uv-texturing-agregando-color-azul>Sketch de UV Texturing (Agregando Color Azul)
<a class=anchor href=#sketch-de-uv-texturing-agregando-color-azul>#</a></h2><p><details><summary>uvBlueX.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GLSL data-lang=GLSL><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the texture coordinates varying was defined in </span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the vertex shader by treegl readShader()</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// open your console and &amp; see!</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// glsl swizzling is both handy and elegant</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// see: https://www.khronos.org/opengl/wiki/Data_Type_(GLSL)#Swizzling</span>
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(texcoords2.xy, <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> texcoords2.x, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>uvBlueY.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GLSL data-lang=GLSL><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the texture coordinates varying was defined in </span>
</span></span><span style=display:flex><span><span style=color:#75715e>// the vertex shader by treegl readShader()</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// open your console and &amp; see!</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// glsl swizzling is both handy and elegant</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// see: https://www.khronos.org/opengl/wiki/Data_Type_(GLSL)#Swizzling</span>
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(texcoords2.xy, <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> texcoords2.y, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details></p><iframe id=uvBlue style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/sketches/uvBlue.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=sketch-de-uv-screen>Sketch de UV Screen
<a class=anchor href=#sketch-de-uv-screen>#</a></h2><details><summary>uv_screen.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>easycam</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>uvShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>opacity</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mode</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Define geometry in world space (i.e., matrices: Tree.pmvMatrix).
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// The projection and modelview matrices may be emitted separately
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// (i.e., matrices: Tree.pMatrix | Tree.mvMatrix), which actually
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// leads to the same gl_Position result.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Interpolate only texture coordinates (i.e., varyings: Tree.texcoords2).
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// see: https://github.com/VisualComputing/p5.treegl#handling
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>uvShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/assets/shader/uv_alpha.frag&#39;</span>,
</span></span><span style=display:flex><span>        { <span style=color:#a6e22e>matrices</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>pmvMatrix</span>, <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>600</span>, <span style=color:#ae81ff>600</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// easycam stuff
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>,           <span style=color:#75715e>// scalar
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],       <span style=color:#75715e>// vector
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>rotation</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>],  <span style=color:#75715e>// quaternion
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    };
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>easycam</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createEasyCam</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>;   <span style=color:#75715e>// state to use on reset (double-click/tap)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>state</span>, <span style=color:#ae81ff>2000</span>); <span style=color:#75715e>// now animate to that state
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>opacity</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.5</span>, <span style=color:#ae81ff>0.01</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>opacity</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>25</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>opacity</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;width&#39;</span>, <span style=color:#e6db74>&#39;280px&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;quad&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;ellipse&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;triangleUP&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;triangleDOWN&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;uvShaderBlueX&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>changed</span>(() =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Change&#34;</span>); });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>200</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// reset shader so that the default shader is used to render the 3D scene
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>    <span style=color:#75715e>// world space scene
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>axes</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>70</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotateY</span>(<span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>125</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>box</span>(<span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#ae81ff>70</span>, <span style=color:#ae81ff>70</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>125</span>));
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sphere</span>(<span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// use custom shader
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>uvShader</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>uvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;opacity&#39;</span>, <span style=color:#a6e22e>opacity</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>    <span style=color:#75715e>// screen-space quad (i.e., x ∈ [0..width] and y ∈ [0..height])
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// see: https://github.com/VisualComputing/p5.treegl#heads-up-display
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>loadFigure</span>(<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mouseWheel</span>(<span style=color:#a6e22e>event</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>//comment to enable page scrolling
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadFigure</span>(<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;quad&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>beginHUD</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>quad</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>endHUD</span>();
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;ellipse&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>beginHUD</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ellipse</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>endHUD</span>()
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;triangleUP&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>beginHUD</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>triangle</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>endHUD</span>();
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;triangleDOWN&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>beginHUD</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>triangle</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>, <span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>endHUD</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>uv_alpha.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GLSL data-lang=GLSL><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec4</span> color4;
</span></span><span style=display:flex><span><span style=color:#75715e>// uniform is sent by the sketch</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> opacity;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(texcoords2.xy, <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>-</span> texcoords2.x, opacity);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><iframe id=uv_screen style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script> 
            
            
            
            <script src=/sketches/uv_screen.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=sketch-de-luma-y-aritmetic-mean>Sketch de Luma y Aritmetic Mean
<a class=anchor href=#sketch-de-luma-y-aritmetic-mean>#</a></h2><details><summary>luma_mena.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lumaShader</span>, <span style=color:#a6e22e>meanShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img1</span>, <span style=color:#a6e22e>img2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>grey_scale</span>, <span style=color:#a6e22e>mode</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lumaShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/assets/shader/luma.frag&#39;</span>, { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>meanShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/assets/shader/mean.frag&#39;</span>, { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/assets/image/fire.jpg&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/assets/image/fire2.jpg&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>600</span>, <span style=color:#ae81ff>600</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>lumaShader</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;fire 1&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;fire 2&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;fire 1&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>changed</span>(() =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Change&#34;</span>); });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>60</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;original&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;luma&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;average&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;original&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>changed</span>(() =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Change&#34;</span>); });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>loadShaderImage</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadShaderImage</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;fire 1&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;luma&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>lumaShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lumaShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img1</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lumaShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;average&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>meanShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>meanShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img1</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>meanShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>lumaShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lumaShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img1</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lumaShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;fire 2&#39;</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;luma&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>lumaShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lumaShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img2</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lumaShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;average&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>meanShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>meanShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img2</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>meanShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>lumaShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lumaShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img2</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>lumaShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>quad</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><p><details><summary>luma.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GLSL data-lang=GLSL><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// uniforms are defined and sent by the sketch</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>bool</span> grey_scale;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>sampler2D</span> texture;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// interpolated texcoord (same name and type as in vertex shader)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// returns luma of given texel</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> luma(<span style=color:#66d9ef>vec3</span> texel) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0.299</span> <span style=color:#f92672>*</span> texel.r <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.587</span> <span style=color:#f92672>*</span> texel.g <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.114</span> <span style=color:#f92672>*</span> texel.b;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// texture2D(texture, texcoords2) samples texture at texcoords2 </span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// and returns the normalized texel color</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec4</span> texel <span style=color:#f92672>=</span> texture2D(texture, texcoords2);
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> grey_scale <span style=color:#f92672>?</span> <span style=color:#66d9ef>vec4</span>((<span style=color:#66d9ef>vec3</span>(luma(texel.rgb))), <span style=color:#ae81ff>1.0</span>) <span style=color:#f92672>:</span> texel;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>mean.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GLSL data-lang=GLSL><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// uniforms are defined and sent by the sketch</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>bool</span> grey_scale;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>sampler2D</span> texture;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// interpolated texcoord (same name and type as in vertex shader)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// returns luma of given texel</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> luma(<span style=color:#66d9ef>vec3</span> texel) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (texel.r <span style=color:#f92672>+</span> texel.g <span style=color:#f92672>+</span> texel.b)<span style=color:#f92672>/</span><span style=color:#ae81ff>3.0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// texture2D(texture, texcoords2) samples texture at texcoords2 </span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// and returns the normalized texel color</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec4</span> texel <span style=color:#f92672>=</span> texture2D(texture, texcoords2);
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> grey_scale <span style=color:#f92672>?</span> <span style=color:#66d9ef>vec4</span>((<span style=color:#66d9ef>vec3</span>(luma(texel.rgb))), <span style=color:#ae81ff>1.0</span>) <span style=color:#f92672>:</span> texel;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details></p><iframe id=Luma_Mean style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/sketches/Luma_Mean.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=sketch-de-hsv>Sketch de HSV
<a class=anchor href=#sketch-de-hsv>#</a></h2><details><summary>hsv.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>hsvShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>img1</span>, <span style=color:#a6e22e>img2</span>, <span style=color:#a6e22e>img3</span>, <span style=color:#a6e22e>img4</span>, <span style=color:#a6e22e>img5</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>grey_scale</span>, <span style=color:#a6e22e>mode</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>hsvShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/assets/shader/hsv.frag&#39;</span>, { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>texcoords2</span> });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/assets/image/landscape1.jpg&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/assets/image/landscape2.jpg&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/assets/image/landscape3.jpg&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/assets/image/landscape4.jpg&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img5</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/assets/image/landscape5.jpg&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img1</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img2</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img3</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img4</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>img5</span>.<span style=color:#a6e22e>resize</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>600</span>, <span style=color:#ae81ff>600</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;landscape 1&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;landscape 2&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;landscape 3&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;landscape 4&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;landscape 5&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;landscape 1&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>changed</span>(() =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Change&#34;</span>); });
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>110</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;original&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;hsv&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;original&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>changed</span>(() =&gt; { <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Change&#34;</span>); });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>loadShaderImage</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>loadShaderImage</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;landscape 1&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;hsv&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img1</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img1</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;landscape 2&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;hsv&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img2</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img2</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;landscape 3&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;hsv&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img3</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img3</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;landscape 4&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;hsv&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img4</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img4</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mode</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;landscape 5&#39;</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>grey_scale</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;hsv&#39;</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img5</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>hsvShader</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>img5</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>hsvShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;grey_scale&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>quad</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>hsv.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GLSL data-lang=GLSL><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// uniforms are defined and sent by the sketch</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>bool</span> grey_scale;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>sampler2D</span> texture;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// interpolated texcoord (same name and type as in vertex shader)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> texcoords2;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> modI(<span style=color:#66d9ef>float</span> a,<span style=color:#66d9ef>float</span> b) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> m<span style=color:#f92672>=</span>a<span style=color:#f92672>-</span>floor((a<span style=color:#f92672>+</span><span style=color:#ae81ff>0.5</span>)<span style=color:#f92672>/</span>b)<span style=color:#f92672>*</span>b;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> floor(m<span style=color:#f92672>+</span><span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>vec3</span> hsv(<span style=color:#66d9ef>vec3</span> c)
</span></span><span style=display:flex><span>{           
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> rValor <span style=color:#f92672>=</span> c.r;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> gValor <span style=color:#f92672>=</span> c.g;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> bValor <span style=color:#f92672>=</span> c.b;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> maximo <span style=color:#f92672>=</span> max(max(rValor, gValor), bValor);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> minimo <span style=color:#f92672>=</span> min(max(rValor, gValor), bValor);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> h <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(maximo <span style=color:#f92672>==</span> rValor){
</span></span><span style=display:flex><span>        h <span style=color:#f92672>=</span> <span style=color:#ae81ff>60.0</span> <span style=color:#f92672>*</span> modI((gValor <span style=color:#f92672>-</span> bValor)<span style=color:#f92672>/</span>(maximo <span style=color:#f92672>-</span> minimo), <span style=color:#ae81ff>6.0</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (maximo <span style=color:#f92672>==</span> gValor){
</span></span><span style=display:flex><span>        h <span style=color:#f92672>=</span> <span style=color:#ae81ff>60.0</span> <span style=color:#f92672>*</span> (((bValor <span style=color:#f92672>-</span> rValor) <span style=color:#f92672>/</span> (maximo <span style=color:#f92672>-</span> minimo)) <span style=color:#f92672>+</span> <span style=color:#ae81ff>2.0</span>);
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        h <span style=color:#f92672>=</span> <span style=color:#ae81ff>60.0</span> <span style=color:#f92672>*</span> (((rValor <span style=color:#f92672>-</span> gValor) <span style=color:#f92672>/</span> (maximo <span style=color:#f92672>-</span> minimo)) <span style=color:#f92672>+</span> <span style=color:#ae81ff>4.0</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> s <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(maximo <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0.0</span>){
</span></span><span style=display:flex><span>        s <span style=color:#f92672>=</span> (maximo <span style=color:#f92672>-</span> minimo) <span style=color:#f92672>/</span> maximo;
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>        s <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> v <span style=color:#f92672>=</span> maximo;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>vec3</span>(h, s, v);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// texture2D(texture, texcoords2) samples texture at texcoords2 </span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// and returns the normalized texel color</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec4</span> texel <span style=color:#f92672>=</span> texture2D(texture, texcoords2);
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> grey_scale <span style=color:#f92672>?</span> <span style=color:#66d9ef>vec4</span>((<span style=color:#66d9ef>vec3</span>(hsv(texel.rgb))), <span style=color:#ae81ff>1.0</span>) <span style=color:#f92672>:</span> texel;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><iframe id=hsv style=width:625px;height:625px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            
            <script src=/sketches/hsv.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p><strong>Referencias</strong></p><p><a href=https://visualcomputing.github.io/docs/shaders/texturing/>https://visualcomputing.github.io/docs/shaders/texturing/</a>
<a href=https://vcwork.github.io/project/docs/Entrega3/parte1/>https://vcwork.github.io/project/docs/Entrega3/parte1/</a>
<a href=https://en.wikipedia.org/wiki/HSL_and_HSV>https://en.wikipedia.org/wiki/HSL_and_HSV</a></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/jussilvaca/commit/537ce1976245f323f7079fb6785d938cd9529380 title='Last modified by Brayan David León Sanabria | November 29, 2022' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 29, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#texturing-uso-de-texturas-a-traves-de-shaders>Texturing (Uso de texturas a traves de Shaders)</a></li><li><a href=#sketch-de-uv-texturing>Sketch de UV Texturing</a></li><li><a href=#sketch-de-uv-texturing-coordenadas-inversas>Sketch de UV Texturing (Coordenadas Inversas)</a></li><li><a href=#sketch-de-uv-texturing-agregando-color-azul>Sketch de UV Texturing (Agregando Color Azul)</a></li><li><a href=#sketch-de-uv-screen>Sketch de UV Screen</a></li><li><a href=#sketch-de-luma-y-aritmetic-mean>Sketch de Luma y Aritmetic Mean</a></li><li><a href=#sketch-de-hsv>Sketch de HSV</a></li></ul></li></ul></nav></div></aside></main></body></html>